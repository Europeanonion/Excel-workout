FAIL src/components/ExcelUploader/ExcelUploader.test.tsx
  ExcelUploader
    ‚úì renders upload button and help text (39 ms)
    ‚úì shows loading state while processing (119 ms)
    ‚úì handles successful file upload and confirmation (22 ms)
    ‚úï handles invalid file type and displays error message (1011 ms)
    ‚úï handles parsing errors and displays error message (1015 ms)
    ‚úì handles invalid file type and displays inline error (32 ms)
    ‚úì handles parsing errors and displays inline error (17 ms)
    ‚úì clears the input after successful upload (8 ms)

  ‚óè ExcelUploader ‚Ä∫ handles invalid file type and displays error message

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<Error>

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"container"[39m
          [36m>[39m
            [36m<h2>[39m
              [0mUpload Workout Excel File[0m
            [36m</h2>[39m
            [36m<div[39m
              [33mclass[39m=[32m"optionsContainer"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"checkboxLabel"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"checkbox"[39m
                  [33mtype[39m=[32m"checkbox"[39m
                [36m/>[39m
                [0mCustomize Column Mapping[0m
              [36m</label>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"uploaderCard "[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"dropZone"[39m
              [36m>[39m
                [36m<p>[39m
                  [0mDrag and drop your Excel file here, or[0m
                [36m</p>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"inputGroup"[39m
                [36m>[39m
                  [36m<label[39m
                    [33mclass[39m=[32m"uploadLabel"[39m
                    [33mfor[39m=[32m"excel-file"[39m
                  [36m>[39m
                    [36m<input[39m
                      [33maccept[39m=[32m".xlsx,.xls,.csv"[39m
                      [33maria-busy[39m=[32m"false"[39m
                      [33maria-describedby[39m=[32m"file-upload-status"[39m
                      [33maria-label[39m=[32m"Upload Excel file"[39m
                      [33mclass[39m=[32m"fileInput"[39m
                      [33mid[39m=[32m"excel-file"[39m
                      [33mtype[39m=[32m"file"[39m
                    [36m/>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"uploadButton"[39m
                    [36m>[39m
                      [0mChoose Excel File[0m
                    [36m</span>[39m
                  [36m</label>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"buttonGroup"[39m
              [36m>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Reset file selection"[39m
                  [33mclass[39m=[32m"resetButton"[39m
                [36m>[39m
                  [0mReset[0m
                [36m</button>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Download template file"[39m
                  [33mclass[39m=[32m"templateButton"[39m
                [36m>[39m
                  [0mDownload Template[0m
                [36m</button>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"status"[39m
                [33mid[39m=[32m"file-upload-status"[39m
              [36m>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"error"[39m
                  [33mrole[39m=[32m"alert"[39m
                [36m>[39m
                  [0mPlease select a valid file (.xlsx, .xls, .csv)[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"helpText"[39m
            [36m>[39m
              [0mSupported formats: .xlsx, .xls, .csv[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

      124 |     // Wait for the error callback to be called
      125 |     await waitFor(() => {
    > 126 |       expect(mockOnError).toHaveBeenCalledWith(expect.any(Error));
          |                           ^
      127 |     }, { timeout: 1000 });
      128 |     
      129 |     const calledErrorMessage = mockOnError.mock.calls[0][0].message;

      at timeout (src/components/ExcelUploader/ExcelUploader.test.tsx:126:27)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:516:19)

  ‚óè ExcelUploader ‚Ä∫ handles parsing errors and displays error message

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<Error>

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"container"[39m
          [36m>[39m
            [36m<h2>[39m
              [0mUpload Workout Excel File[0m
            [36m</h2>[39m
            [36m<div[39m
              [33mclass[39m=[32m"optionsContainer"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"checkboxLabel"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"checkbox"[39m
                  [33mtype[39m=[32m"checkbox"[39m
                [36m/>[39m
                [0mCustomize Column Mapping[0m
              [36m</label>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"uploaderCard "[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"dropZone"[39m
              [36m>[39m
                [36m<p>[39m
                  [0mDrag and drop your Excel file here, or[0m
                [36m</p>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"inputGroup"[39m
                [36m>[39m
                  [36m<label[39m
                    [33mclass[39m=[32m"uploadLabel"[39m
                    [33mfor[39m=[32m"excel-file"[39m
                  [36m>[39m
                    [36m<input[39m
                      [33maccept[39m=[32m".xlsx,.xls,.csv"[39m
                      [33maria-busy[39m=[32m"false"[39m
                      [33maria-describedby[39m=[32m"file-upload-status"[39m
                      [33maria-label[39m=[32m"Upload Excel file"[39m
                      [33mclass[39m=[32m"fileInput"[39m
                      [33mid[39m=[32m"excel-file"[39m
                      [33mtype[39m=[32m"file"[39m
                    [36m/>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"uploadButton"[39m
                    [36m>[39m
                      [0mChoose Excel File[0m
                    [36m</span>[39m
                  [36m</label>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"buttonGroup"[39m
              [36m>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Reset file selection"[39m
                  [33mclass[39m=[32m"resetButton"[39m
                [36m>[39m
                  [0mReset[0m
                [36m</button>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Download template file"[39m
                  [33mclass[39m=[32m"templateButton"[39m
                [36m>[39m
                  [0mDownload Template[0m
                [36m</button>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"status"[39m
                [33mid[39m=[32m"file-upload-status"[39m
              [36m>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"error"[39m
                  [33mrole[39m=[32m"alert"[39m
                [36m>[39m
                  [0mFailed to parse Excel file[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"helpText"[39m
            [36m>[39m
              [0mSupported formats: .xlsx, .xls, .csv[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

      150 |     // Wait for the error callback to be called
      151 |     await waitFor(() => {
    > 152 |       expect(mockOnError).toHaveBeenCalledWith(expect.any(Error));
          |                           ^
      153 |     }, { timeout: 1000 });
      154 |     
      155 |     expect(mockOnError.mock.calls[0][0].message).toBe(errorMessage);

      at timeout (src/components/ExcelUploader/ExcelUploader.test.tsx:152:27)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:516:19)

Test Suites: 1 failed, 1 total
Tests:       2 failed, 6 passed, 8 total
Snapshots:   0 total
Time:        3.516 s, estimated 4 s
Ran all test suites matching /src\/components\/ExcelUploader\/ExcelUploader.test.tsx/i.

